## 💫 4장 - 라우팅

---

#### 1. 주소와 경로

###### IP주소와 MAC주소

MAC주소는 같은 네트워크 내에서의 수신처를 결정한다. 다음에 보낼 장소를 나타내기 때문에 MAC주소는 중간에 변경된다. IP주소는 수신처의 컴퓨터를 결정하며, 최종 수신처를 나타낸다.

###### 경로

송신처에서 발송된 데이터는 어떤 네트워크를 거쳐서 마치 길처럼 수신처에 도달하게 된다. 라우터는 이 경로를 결정하는데, 정확히는 수신처까지 가기 위해 다음에 어디로 보내야 할지 결정한다. 이렇게 라우터가 다음 수신처를 결정하고 이것이 연결되어 경로가 되는 방식을 홉 바이 홉 방식이라고 한다.

라우터가 없으면 다른 네트워크에 데이터그램을 보낼 수 없다. 다른 네트워크 수신이면 라우터로, 동일 네트워크 수신이면 직접 통신한다는 규칙이 작용하고 있기 때문이다. 여기서 다른 네트워크에 데이터를 보낼 때, 컴퓨터에 설정되어 있는 라우터를 디폴트 게이트웨이라고 한다.

#### 2. 라우터

###### 라우터

라우터는 라우팅을 하고 다른 네트워크에 데이터를 전송하기 때문에, 인터넷 작업에서 가장 중요한 장치이다. 라우터는 네트워크의 경계상에 배치되기 때문에 여러 개의 인터페이스를 가질 수 있다. 이 인터페이스가 각각의 IP주소를 가지고 다른 네트워크에 소속되어 있기 때문에, 라우터는 복수의 네트워크에 소속될 수 있다. 이더넷, WAN 회선 등 다른 종류의 네트워크 사이를 연결하며 데이터 중계를 한다. 라우팅이란 데이터그램의 수신처 IP주소를 근거로 다음에 송신하는 라우터를 결정하는 작업이다. 필터링은 전송받은 데이터그램에 대해 조건을 붙여 그 데이터를 파기하는 것이다.

###### 라우터의 동작

라우팅 테이블에는 수신처 네트워크까지의 거리, 다음에 도달하는 라우터, 그 라우터에 연결된 자신의 인터페이스 등이 기재되어 있다.

최장일치의 룰(Longest Match)이란 라우팅 테이블에서 다음 수신처를 찾을 때 사용되는 규칙으로, IP주소의 비트열과 네트워크 주소의 비트열을 앞에서부터 순서대로 비교하고, 가장 많이 일치하는 것부터 선택하는 것이다. 

호스트로부터 패킷을 수신받고, 수신처 IP주소로부터 수신처 네트워크를 결정하고, 라우팅 테이블에서 다음 중계할 라우터, 송신할 인터페이스가 결정되고, 결정된 인터페이스로부터 패킷을 송신하는 것 순으로 라우터가 동작한다.

#### 3. 디폴트 게이트웨이



#### 4. 라우팅

#### 5. 라우팅 프로토콜

#### 6. RIP

#### 7. ICMP

#### 8. Echo와 Time Exceeded
