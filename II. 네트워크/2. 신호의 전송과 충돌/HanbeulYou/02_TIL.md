# 하루 3분 네트워크 교실

## 2. 신호의 전송과 충돌

### 1. 1계층의 역할과 개요

- 전기 · 기계적인 전송
    - 1계층은 전기 · 기계적인 전송을 수행
    - 케이블이 연결되어 있는 기기에 신호를 전달하는 것
    - 이를 위해 몇 가지의 규격과 규칙이 정해져 있음
- 통신 매체
    - 통신 매체란 신호가 지나는 ‘파이프’ 역할을 하는 것
    - 크게 유선과 무선으로 나누어짐
    - 유선 : 케이블을 사용해 신호를 보냄
        - 동선 : 전기 신호를 사용 / 현재 사용되는 케이블은 UTP(Unshielded Twist Pair cable)임
        - UTP : 두 개가 한 쌍인 동선 네 쌍으로 이루어짐, 일반적으로 LAN에서 사용되는 케이블
        - 광파이버 : 광신호를 사용 / 신호의 안정과 통신속도에서는 뛰어나지만 굽히기 어려움
    - 인터페이스 : 컴퓨터가 보내고 싶은 데이터를 케이블에 맞는 신호로 변환, 케이블에서 보내온 신호를 컴퓨터에서 사용하는 데이터로 변환
    - NIC(Network Interface Card) : 일반적으로 컴퓨터에서 사용되는 인터페이스. LAN용 케이블에 접속하기 위함.
    - DCE(Data Circuit terminating Equipment) : 회선종단기기. WAN의 신호를 변환하기 위한 별도의 신호 변환기

---

### 2. 신호와 충돌

- 신호
    - 데이터 : 컴퓨터상에서 리소스를 공유하기 위한 정보
    - 인터페이스 : 비트를 신호로, 신호를 비트로 변환하는 기기
    - 
    - 신호의 형식에 따라 통신 속도가 결정 됨
    - 통신 속도 : 1초 동안 전해지는 비트 수(bps)
- 신호에 발생하는 문제
    - 신호의 감쇠
        - 케이블을 지나는 동안 신호가 약해짐 → 진폭이 약해져서 읽기에 어려움
        - 중간에 약해진 신호를 본래 상태로 되돌리기 위한 증폭이라는 처리를 하는 기계 설치
    - 노이즈 · 간섭
        - 열 잡음, 크로스 토크, 전자파 등 노이즈나 간섭으로 인해 전기신호가 무너지는 것
        - 케이블에 실드라는 처리를 해서 간섭이나 노이즈를 막음
        - 광파이버(광신호)는 노이즈나 간섭을 받지 않음
    - 충돌
        - 멀티액세스 네트워크(허브) 등에서 일어나는 문제
        - 신호가 보내지고 있는 도중에 다른 신호를 보내는 경우에 발생
        - 전기 신호가 뒤섞여서 신호의 진폭이 붕괴됨
        - 신호를 보내는 타이밍을 서로 엇갈리게 하거나 신호가 지나가는 길을 나눠 충돌을 방지함

---

### 3. 허브

- 허브의 기능
    - 신호의 증폭과 재생
        - 감쇠에 의해 붕괴된 신호를 본래의 형태로 증폭 · 재생함
        - 리피터 : 증폭만 하는 기계. 허브와 달리 케이블을 많이 연결할 수 없음.
    - 복수의 기기를 연결해 네트워크 구축
        - 허브에 케이블로 연결되어 있는 기기는 동일 케이블에 연결되어 있는 것하고 같은 취급을 받음
        - 허브에 연결되어 있는 기기끼리 신호를 주고받을 수 있음
        - 연속 접속 : 허브와 허브를 연결하는 접속
- 충돌 도메인
    - 허브는 수신한 신호에 대해 어떤 제어도 하지 않음
    - 플러딩(flooding) : 수신한 포트 이외에 모든 포트에 수신한 신호를 송신
    - 허브에 연결되어 있는 기기가 신호를 보내면 충돌이 일어날 가능성이 존재
    - 충돌 도메인(Collision Domain) : 신호를 송신하면 충돌이 발생할지도 모르는 범위
        - 허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있음
        - 충돌 가능성을 낮추기 위해서 충돌 도메인은 작아야 함

---

### 4. 2계층의 역할과 개요

- 2계층의 개요
    - 허브에 연결되어 있는 모든 컴퓨터에 데이터가 전송됨 → 목적으로 하는 컴퓨터에만 원하는 정보를 전송하려면?
    - 신호의 충돌을 막기 위해선?
        - 신호의 송신 전이나 후에 바르게 데이터를 송수신하는 순서가 필요
    - 2계층에서는 신호가 닿는 범위에서의 데이터 전송에 관한 규정을 다룸
        - 신호가 닿는 범위 : 세그먼트 범위에서의 데이터 전송
- 프레이밍과 신호의 동기
    - 1계층에서 다루는 신호와 케이블 등에 따라 2계층의 규격이 달라짐
        - LAN과 WAN의 차이
        - LAN용 규칙 : LAN의 사실표준인 이더넷(Ethernet)
    - 프레이밍(Framing)
        - 1계층의 신호를 데이터로 인식할 수 있게됨
        - 프리엠블(Preamble) : 프레임이 시작된다는 신호 → 이를 통해 타이밍을 맞춤
        - 패킷 교환 방식에서는 프리엠블 방식이 일반적임
        - 이에 대응되는 타이밍을 맞추는 방법 : 동기 통신

---

### 5. 2계층 주소와 이더넷

- 주소와 캐스트
    - 주소(Address) : 데이터를 보내는 상대와 자신을 특정하는 데이터
        - 데이터 전송 방법에 따라 3종류가 있음
        - 유니캐스트(Unicast) : 1대1
        - 브로드캐스트(Broadcast) : 1대 전체(모두에게 메시지를 보냄)
        - 멀티캐스트(Multicast) : 1대 다수(지정된 복수의 기기)
    - 어드레싱(Addressing) : 주소를 어떻게 배정할 것인가
- MAC 주소
    - 각각의 기기는 유니캐스트 주소를 적어도 한 개 갖고 있음
    - 라우터처럼 복수의 인터페이스를 가진 기기는 인터페이스마다 유니캐스트 주소를 가짐
    - 유니캐스트의 주소는 유일함
    - 멀티캐스트 주소는 같은 주소를 가진 기기가 여러 개 있어도 됨
        - 멀티캐스트 주소는 그룹 번호같은 취급
    - 이더넷에서 사용되는 주소는 MAC(Media Access Control Address)
        - 인터페이스에 지정된 고정 주소
        - 48비트 → 4비트마다 16진수로 고쳐서 씀
        - 선두 24비트 → 벤더 코드(인터페이스 제조사 번호)
        - 후반 24비트 → 벤더 할당 코드(제조사가 붙인 번호)

---

### 6. 이더넷

- 이더넷 프레임
    - 이더넷에서는 ‘이더넷 헤더’와 ‘이더넷 트레일러’를 데이터그램에 붙여 ‘이더넷 프레임’으로 캡슐화 함
    - 이더넷 헤더에는 ‘수신처의 주소(48비트)’, ‘송신처의 주소(48비트)’, 페이로드의 내용을 식별하는 ‘타입(16비트)’이 붙음
    - 트레일러에는 에러를 체크하는 ‘FCS(Frame Check Sequence, 32비트)’가 붙음
        - FCS는 신호가 전송되는 동안에 생긴 에러를 체크하기 위함
    - 통신 중에는 에러를 고칠 수 없음 → 수신하기 전까지 알 수 없기 때문
    - 에러가 생기면 에러가 있었던 프레임은 파기 & 송신측에 알리지 않음
- 이더넷 동작
    - 허브를 사용한 멀티액세스 네트워크 → 모든 기기에 데이터가 도달
        - 수신한 프레임의 수신처 MAC 주소를 보고 자기에게 온 것 외에 다른 프레임을 파기
        - 극단적으로 주소란 ‘수신처가 자기인지 아닌지’를 체크하기 위함
        - 멀티캐스트의 경우 그룹의 번호로 확인
    - 충돌 방지
        - CSMA/CD(Carrier Sense Multiple Access/Collision Detection)이라는 액세스 제어를 시행
        - 인터페이스에 연결되어 있는 케이블에 신호를 보내는 ‘액세스’를 ‘제어’
        - CS(신호 감지) : 누군가가 송신 중이라면 송신 X
        - MA(다중 액세스) : 아무도 송신하고 있지 않다면 송신 O
        - CD(충돌 검사) : 송신 후에 충돌이 일어나면 재수행

---

### 7. 스위치

- 허브와 스위치
    - CSMA/DA만으로 충분 X
    - 충돌을 발생하지 않도록 하는 방법
        - 신호를 보내는 타이밍이 겹치지 않도록 하는 방법
        - 신호가 지나는 길을 나누는 방법
    - 스위치를 허브 대신 사용해 충돌 방지
- MAC 주소 필터링
    - 스위치 안에서 수신한 프레임을 따로따로 보낼 수 있도록 처리해 충돌을 막음
        - by MAC 주소 필터링과 버퍼링
    - MAC 주소 필터링 (학습 + 스위칭)
        - **학습** : 수신한 프레임의 송신처 MAC 주소를 기록 → 수신한 포트랑 MAC 주소를 연관 지음
        - 어드레스 테이블(Address table) : 학습에 의해 스위치가 포트에 연결되어 있는 컴퓨터의 MAC 주소를 기억해놓은 대응표
        - **스위칭** : 프레임의 수신처 MAC 주소를 보고 ‘그 MAC 주소가 있는 포트’만 프레임을 송신 (by 학습한 어드레스 테이블)
        - 위와 같은 과정을 통해 수신처가 다른 프레임이 동시에 스위치에 도달해도 충돌 발생 X
        - MAC 주소에 의해 송신하는 포트를 필터링하기 때문에 MAC 주소 필터링이라고 함
        - 학습하지 않은 상태의 스위치는 필터링 기능 X
        - 수신처가 같은 프레임이 동시에 도달 → 처리 X (버퍼링이 해결)

---

### 8. 전이중 이더넷

- 버퍼링
    - 버퍼를 사용한 처리
        - 버퍼 : 일시적으로 데이터를 기록해 둘 수 있는 메모리
        - 충돌할 것 같은 프레임을 버퍼에 일시적으로 저장 → 송신이 끝나면 저장해 두었던 프레임 송신
    - 버퍼 용량의 한계 → 백 프레셔(Back Pressure, 전이중 이더넷 X) 또는 IEEEE802.3x(전이중 이더넷) 규격을 사용해 송신을 조정
    - 충돌 도메인은 스위치(필터링과 버퍼링)에 의해 분할
- 전이중 이더넷
    - 스위치를 사용할 때 CSMA/CD는 비효율적
        - CSMA/CD는 반이중 통신임
        - 반이중 통신(Half-Duplex) : 누군가 송신 중일 때 송신 X, 자신이 송신 중일 때 수신 X
    - 전이중 통신(Full-Duplex) : 송신과 수신을 동시에 할 수 있음
        - 스위치를 사용해 전이중 통신을 하는 것을 전이중 이더넷이라고 함

---